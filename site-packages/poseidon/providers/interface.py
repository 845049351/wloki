#!/usr/bin/env python

from .chinanetcenter import ChinaNetCenter
from .fastweb import Fastweb
from .ucloud import UCloud


providers = {
    'nc': ChinaNetCenter(),
    'fw': Fastweb(),
    'uc': UCloud()
}


class ProviderInterface(object):

    def __init__(self, provider_name):
        self.provider_name = provider_name
        try:
            self.provider = providers[provider_name]
        except KeyError:
            raise NotImplementedError('No such provider')

    def purge(self, url_list):
        if self.provider_name == 'nc':
            return self.provider.content_purge(url_list)
        elif self.provider_name == 'fw':
            return self.provider.add_purge(url_list)
        elif self.provider_name == 'uc':
            return self.provider.refresh_domain_cache(url_list)

    def prefetch(self, url_list):
        pass

    def get_bandwidth(self, start_date, end_date):
        pass
